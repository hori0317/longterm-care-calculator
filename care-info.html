<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>長照相關資訊｜補助額度速覽</title>

  <link rel="icon" type="image/x-icon" href="YORU.ico" />
  <link rel="stylesheet" href="style.css" />
  <script src="script.js" defer></script>

  <!-- 浮水印（與首頁一致） -->
  <style>
    :root{
      --wm-text: "@hori版權所有";
      --wm-size: 36px;
      --wm-angle: -25deg;
      --wm-alpha: 0.05;
      --wm-shift: 120px;
    }
    .watermark { position: fixed; inset: 0; pointer-events: none; z-index: 9999; overflow: hidden; }
    .topbar { z-index: 10000; position: sticky; top: 0; }
    .wm-item{
      position: absolute;
      font-weight: 700;
      font-size: var(--wm-size);
      color: rgba(0,0,0,var(--wm-alpha));
      transform: rotate(var(--wm-angle));
      white-space: nowrap;
      user-select: none;
      will-change: transform;
      animation: wm-sway var(--dur, 12s) ease-in-out infinite alternate;
    }
    @keyframes wm-sway{
      0%   { transform: translateX(0) rotate(var(--wm-angle)); }
      100% { transform: translateX(var(--wm-shift)) rotate(var(--wm-angle)); }
    }
    @media print{ .watermark { opacity: 0.08; } }

    /* === 補助額度速覽表格 === */
    .info-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      overflow: hidden;
      text-align: center;
      margin-top: 10px;
    }
    .info-table th {
      background: #f6f1d9;
      color: #5b5534;
      padding: 10px;
      font-weight: 800;
      border-bottom: 1px solid var(--line);
    }
    .info-table td {
      padding: 10px;
      border-top: 1px solid var(--line);
      font-weight: 600;
    }
    .info-table tbody tr:nth-child(even) { background: #fffef9; }
    @media (max-width: 600px){
      .info-table th, .info-table td { padding: 8px; font-size: 14px; }
    }
  </style>
</head>

<body>
  <!-- 浮水印 -->
  <div class="watermark" aria-hidden="true">
    <span class="wm-item" style="top:5%; left:5%; --dur:9s;">@hori版權所有</span>
    <span class="wm-item" style="top:5%; left:35%; --dur:11s;">@hori版權所有</span>
    <span class="wm-item" style="top:5%; left:65%; --dur:10s;">@hori版權所有</span>
    <span class="wm-item" style="top:25%; left:10%; --dur:13s;">@hori版權所有</span>
    <span class="wm-item" style="top:25%; left:40%; --dur:12s;">@hori版權所有</span>
    <span class="wm-item" style="top:25%; left:70%; --dur:14s;">@hori版權所有</span>
    <span class="wm-item" style="top:50%; left:5%; --dur:10s;">@hori版權所有</span>
    <span class="wm-item" style="top:50%; left:35%; --dur:11s;">@hori版權所有</span>
    <span class="wm-item" style="top:50%; left:65%; --dur:9s;">@hori版權所有</span>
    <span class="wm-item" style="top:75%; left:10%; --dur:13s;">@hori版權所有</span>
    <span class="wm-item" style="top:75%; left:40%; --dur:12s;">@hori版權所有</span>
    <span class="wm-item" style="top:75%; left:70%; --dur:10s;">@hori版權所有</span>
    <span class="wm-item" style="top:90%; left:15%; --dur:11s;">@hori版權所有</span>
    <span class="wm-item" style="top:90%; left:45%; --dur:10s;">@hori版權所有</span>
    <span class="wm-item" style="top:90%; left:75%; --dur:12s;">@hori版權所有</span>
  </div>

  <!-- 頂部導覽列 -->
  <header class="topbar">
    <div class="brand">
      <a href="https://github.com/hori07/longterm-care-calculator/tree/main" target="_blank" class="logo-link">
        <img src="org-logo.png" alt="logo" onerror="this.style.opacity=0.2" />
      </a>
      <span class="site-title">長照相關資訊</span>
    </div>

    <nav class="nav-links">
      <a href="index.html">首頁</a>
      <a href="care-info.html">長照相關資訊</a>
      <a href="news.html">最新公告</a>
      <a href="contact.html">聯繫方式</a>
      <a href="about.html">關於我們</a>
    </nav>

    <div class="actions">
      <button class="btn pill btn-orange" id="btnUnitToggle" type="button" data-unit="B">B單位</button>
      <button class="btn pill btn-green" id="btnReset" type="button">重置</button>
      <button class="btn pill btn-gray" type="button" onclick="window.print()">列印</button>
    </div>
  </header>

  <div class="divider"></div>

  <main class="container">

    <!-- ==================== BA 額度 ==================== -->
    <section class="card">
      <h2 class="card-title">補助額度速覽（BA 碼）</h2>
      <p class="hint">依 CMS 等級之每月給付額，政府補助比例：一般戶 84%、中低收 95%、低收 100%。</p>
      <table class="info-table" id="baQuotaTable">
        <thead>
          <tr>
            <th>CMS 等級</th>
            <th>一般戶(84%)</th>
            <th>中低收(95%)</th>
            <th>低收(100%)</th>
            <th>基礎額度</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ==================== GA 額度 ==================== -->
    <section class="card">
      <h2 class="card-title">補助額度速覽（GA 碼｜喘息服務）</h2>
      <p class="hint">依 CMS 等級之每月最高補助額度。</p>
      <table class="info-table" id="gaQuotaTable">
        <thead>
          <tr>
            <th>CMS 等級</th>
            <th>GA 額度</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ==================== SC 額度 ==================== -->
    <section class="card">
      <h2 class="card-title">補助額度速覽（SC 碼｜短期替代照顧）</h2>
      <p class="hint">依 CMS 等級之每月最高補助額度。</p>
      <table class="info-table" id="scQuotaTable">
        <thead>
          <tr>
            <th>CMS 等級</th>
            <th>SC 額度</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="card">
      <h2 class="card-title">其他長照資訊</h2>
      <p class="hint">可放常見問答、服務流程、法規摘要等內容。</p>
    </section>
  </main>

  <footer id="bottomDock" class="footerbar">
    <div class="foot">
      <span class="ok">本頁為補助速覽，實際金額以試算機為準。</span>
    </div>
  </footer>

  <!-- ====== 自動產生 BA / GA / SC 額度表 ====== -->
  <script>
    (function(){
      if (typeof cmsQuota !== 'object' || typeof GA_CAP !== 'object' || typeof SC_CAP !== 'object') return;
      const fmt = n => Number(n||0).toLocaleString('zh-TW');
      const levels = [2,3,4,5,6,7,8];

      // BA
      const baTbody = document.querySelector('#baQuotaTable tbody');
      levels.forEach(cms=>{
        const base = cmsQuota[cms] || 0;
        const normal = Math.round(base * 0.84);
        const mid = Math.round(base * 0.95);
        const low = base;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>CMS${cms}</td>
          <td>${fmt(normal)}</td>
          <td>${fmt(mid)}</td>
          <td>${fmt(low)}</td>
          <td>${fmt(base)}</td>
        `;
        baTbody.appendChild(tr);
      });

      // GA
      const gaTbody = document.querySelector('#gaQuotaTable tbody');
      levels.forEach(cms=>{
        const val = GA_CAP[cms] || 0;
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>CMS${cms}</td><td>${fmt(val)}</td>`;
        gaTbody.appendChild(tr);
      });

      // SC
      const scTbody = document.querySelector('#scQuotaTable tbody');
      levels.forEach(cms=>{
        const val = SC_CAP[cms] || 0;
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>CMS${cms}</td><td>${fmt(val)}</td>`;
        scTbody.appendChild(tr);
      });
    })();
  </script>

  <!-- 導覽目前頁高亮 -->
  <script>
    (function(){
      const here = location.pathname.split('/').pop() || 'care-info.html';
      document.querySelectorAll('.nav-links a[href]').forEach(a=>{
        const target = a.getAttribute('href').split('/').pop();
        if (target === here) a.classList.add('active');
      });
    })();
  </script>

  <!-- 禁止右鍵與複製 -->
  <script>
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if ((e.ctrlKey || e.metaKey) && ['u','s','p'].includes(e.key.toLowerCase())) e.preventDefault();
      if (e.key === 'F12') e.preventDefault();
    });
    document.addEventListener('selectstart', e => e.preventDefault());
    document.addEventListener('copy', e => e.preventDefault());
  </script>
</body>
</html>
