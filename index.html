<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>額度試算</title>

  <!-- 網站圖示 -->
  <link rel="icon" href="YORU.ico" type="image/x-icon">

  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header class="app-title">
    <h1>額度試算</h1>
  </header>

  <!-- 上方三欄 -->
  <section class="top-grid">

    <!-- 左：居服薪資(6/4) / 加成次數（示意存放，不影響下方計算） -->
    <div class="card">
      <h2>居服薪資(6/4)</h2>

      <div class="addon-hint">
        預計月薪資：<span id="addonHint" class="warn">請儲存加成次數</span>
      </div>

      <div class="addon-list">
        <div class="addon-head">
          <div>項目</div><div>價格</div><div>次數</div>
        </div>
        <div id="addonRows"></div>
      </div>

      <button class="btn primary" onclick="saveAddons()">儲存</button>

      <p class="note">
        ※此區僅示意加成欄位（ AA05 / AA06 / AA08 / AA09 / AA11 ），與下方服務額度計算分開，不影響補助額度。
      </p>
    </div>

    <!-- 中：基本資料 -->
    <div class="card">
      <h2>基本資料</h2>

      <!-- 身分別 -->
      <div class="field">
        <label class="lbl">身分別</label>
        <div class="seg">
          <label><input type="radio" name="idty" id="id-normal" value="一般戶" checked> 一般戶</label>
          <label><input type="radio" name="idty" value="中低收入戶"> 中低收</label>
          <label><input type="radio" name="idty" value="低收入戶"> 低收</label>
        </div>
      </div>

      <!-- 外籍看護 -->
      <div class="field">
        <label class="lbl">外籍看護</label>
        <div class="seg">
          <label><input type="radio" name="foreign" id="fg-no" value="0" checked> 無</label>
          <label><input type="radio" name="foreign" id="fg-yes" value="1"> 有</label>
        </div>
      </div>

      <!-- CMS 等級（縮小圓角 pill） -->
      <div class="field">
        <label class="lbl">CMS等級</label>
        <div class="seg compact">
          <label><input type="radio" name="cms" id="cms2" value="2" checked>2</label>
          <label><input type="radio" name="cms" value="3">3</label>
          <label><input type="radio" name="cms" value="4">4</label>
          <label><input type="radio" name="cms" value="5">5</label>
          <label><input type="radio" name="cms" value="6">6</label>
          <label><input type="radio" name="cms" value="7">7</label>
          <label><input type="radio" name="cms" value="8">8</label>
        </div>
      </div>

      <!-- 留用額度 / 額度總計(唯讀) -->
      <div class="field">
        <label class="lbl">留用額度</label>
        <input id="keepQuota" type="number" min="0" step="1" placeholder="例如 3000">
      </div>

      <div class="field">
        <label class="lbl">給付額度(主額度＋留用)</label>
        <input id="grantQuota" type="text" readonly>
      </div>
    </div>

    <!-- 右：個案額度及自付額 -->
    <div class="card">
      <h2>個案額度及自付額</h2>
      <div class="summary">
        <div class="row"><span>額度總計：</span><strong id="sumGrant">0</strong></div>
        <div class="row"><span>剩餘額度：</span><strong id="sumRemain">0</strong></div>
        <div class="row"><span>部分負擔：</span><strong id="sumCopay">0</strong></div>
        <div class="row"><span>自付總計：</span><strong id="sumSelfpay">0</strong></div>
      </div>
      <div id="overMsg" class="over hidden"></div>
    </div>

  </section>

  <!-- 下方服務表 -->
  <section class="card">
    <h2>服務安排</h2>
    <div id="tables"></div>
  </section>

  <!-- 操作 -->
  <div class="actions">
    <button class="btn" onclick="resetAll()">重置</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
