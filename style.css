/* 色票與避位變數（JS 會動態覆寫 --topbar-h 與 --dock-h） */
:root{
  --bg:#fff6d5;
  --card:#fffdf5;
  --line:#e6dca8;
  --ink:#3b3a1f;
  --muted:#78714f;
  --green:#2f7d32;
  --green-2:#0f766e;
  --orange:#f59e0b;
  --graybtn:#9ca3af;
  --warn:#b00020;

  --topbar-h:56px; /* 預設；啟動後由 JS 寫入實際高度 */
  --dock-h:64px;   /* 預設；啟動後由 JS 寫入實際高度 */
}

/* 基礎 */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Noto Sans TC,Roboto,Arial;
  color:var(--ink); background:var(--bg);
  padding-top:var(--topbar-h);   /* 頂端預留，避免內容被固定 topbar 蓋住 */
  padding-bottom:var(--dock-h);  /* 底部預留，避免內容被 footerbar 蓋住 */
}
img{max-width:100%; display:block}
.hidden{display:none !important}

/* 頂部列（固定在視窗） */
.topbar{
  position:fixed; top:0; left:0; right:0; z-index:100;
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 16px; background:#fff; border-bottom:1px solid var(--line);
}
.brand{display:flex; align-items:center; gap:8px; font-weight:700}
.brand img{width:28px; height:28px; object-fit:contain; opacity:.9}
.actions{display:flex; gap:8px}

/* spacer：以 CSS 變數提供保險墊高（index 有放空 div） */
#topSpacer{ height:var(--topbar-h); }
#dockSpacer{ height:var(--dock-h); }

.divider{height:8px; background:transparent}

/* 按鈕 */
.btn{border:1px solid transparent; padding:8px 12px; cursor:pointer; font-weight:600; background:#fff; border-radius:10px; box-shadow:0 1px 0 rgba(0,0,0,.03)}
.btn.pill{border-radius:999px}
.btn-primary{background:var(--green-2); color:#fff}
.btn-green{background:var(--green); color:#fff}
.btn-orange{background:var(--orange); color:#fff}
.btn-gray{background:var(--graybtn); color:#fff}

/* 版面 */
.container{max-width:1180px; margin:16px auto; padding:0 12px}
.grid-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:16px}
.card{
  background:var(--card); border:1px solid var(--line); border-radius:12px; padding:14px 14px 16px;
  box-shadow:0 1px 0 rgba(0,0,0,.03);
}
.card-title{margin:0 0 10px 0; font-size:18px}
.row{display:flex; align-items:center; gap:12px}
.space-between{justify-content:space-between}

.hint{font-size:12px; color:var(--muted)}
.hint.warn{color:var(--warn)}
.note{font-size:12px; color:var(--muted)}
.note.warn{color:var(--warn)}

/* AA 區（「項目＋次數」兩欄） */
.addon{margin-top:8px}
.addon-head,
.addon-row{
  display:grid; grid-template-columns:1fr 1fr; gap:8px; align-items:center;
  padding:8px 10px; border:1px solid var(--line);
}
.addon-head{
  background:#f7f3df; border-bottom:none; border-top-left-radius:8px; border-top-right-radius:8px;
  font-weight:700
}
.addon-body .addon-row + .addon-row{border-top:none}
.addon-body .addon-row:last-child{
  border-bottom-left-radius:8px; border-bottom-right-radius:8px;
}
.addon-inputs{display:flex; justify-content:flex-end}
.addon-inputs input{
  width:90px; padding:6px 8px; text-align:right;
  border:1px solid var(--line); border-radius:8px; background:#fff;
}

/* QR 區 */
.qrbox{display:flex; gap:12px; margin-top:12px}
.qr-left{width:92px}
.qr-right .bold{font-weight:700}
.qr-right .orange{color:var(--orange)}

/* 基本資料 */
.form-row{display:flex; align-items:center; gap:12px; margin:10px 0}
.chips{display:flex; flex-wrap:wrap; gap:8px}
.chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; background:#fff; border:1px solid var(--line); border-radius:999px}
.cms{display:flex; gap:8px}
.cms label{display:flex; align-items:center; gap:6px}

/* KV 區 */
.kv{display:grid; gap:6px}
.kv-row{display:flex; justify-content:space-between}

/* 服務表格 */
.service-card .card-title{margin-bottom:12px}
#tables h3{
  margin:16px 0 8px; padding-left:12px; position:relative; font-size:16px
}
#tables h3::before{
  content:""; position:absolute; left:0; top:6px; width:4px; height:16px; background:teal; border-radius:2px
}
table{width:100%; border-collapse:separate; border-spacing:0; border:1px solid var(--line); border-radius:10px; overflow:hidden}
thead th{background:#f7f3df; padding:10px; text-align:left; border-bottom:1px solid var(--line)}
tbody td{padding:8px 10px; border-bottom:1px solid var(--line)}
tbody tr:last-child td{border-bottom:none}
tbody input{
  width:100%; padding:6px 8px; border:1px solid var(--line); border-radius:8px; background:#fff; text-align:right
}
td:last-child, th:last-child{text-align:right}

/* 底部資訊條（固定） */
.footerbar{
  position:fixed; left:0; right:0; bottom:0; z-index:20;
  background:#fff; border-top:1px solid var(--line)
}
.foot{
  max-width:1180px; margin:0 auto; padding:8px 12px;
  display:flex; gap:18px; align-items:center; justify-content:flex-end; color:#333
}
.foot .ok{color:var(--green)}
.foot .warn{color:var(--warn)}

/* 讓最底的服務卡與 footer 保持距離（再加一道保險） */
.service-card{ margin-bottom: calc(var(--dock-h) + 12px); }
