/**********************
 * style.css（完整版，含色票＋避位修正）
 * 2025-10-31
 **********************/

/* === 全站色票（可依需要微調） === */
:root {
  /* 背景與卡片 */
  --bg:       #fff8e1;   /* 柔亮奶油黃 */
  --card:     #fffef9;   /* 暖白卡片 */
  --line:     #e8deaa;   /* 柔和線條 */

  /* 文字 */
  --ink:      #2e2a1e;   /* 主文字（深咖啡） */
  --muted:    #80795b;   /* 次文字（暖灰） */

  /* 主題綠系 */
  --green:    #2e7d32;   /* 主綠 */
  --green-2:  #128277;   /* 青松綠（次強調） */

  /* 強調與狀態 */
  --orange:   #f59e0b;   /* 橘色強調 */
  --graybtn:  #9ca3af;   /* 中性灰按鈕 */
  --warn:     #d32f2f;   /* 警示紅 */

  /* 補充 */
  --accent:   #ffe082;   /* 淺黃 hover */
  --border:   #f3e7c0;   /* 區塊邊界 */

  /* 底欄避位（JS 會覆寫 --dock-h） */
  --dock-gap: 12px;
  --dock-h:   64px;
}

/* === 基礎設定 === */
* {
  box-sizing: border-box;
  font-family: "Noto Sans TC", "Microsoft JhengHei", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
}
html, body { height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--ink);
  line-height: 1.6;
}

/* === 頂部列 === */
.topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 16px;
  background: color-mix(in srgb, var(--accent) 60%, white);
  border-bottom: 1px solid var(--line);
  box-shadow: 0 2px 5px rgba(0,0,0,.06);
  position: sticky;
  top: 0;
  z-index: 50;
}

.topbar .brand {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
  font-size: 18px;
  color: var(--ink);
}

.topbar img {
  width: 36px;
  height: 36px;
  object-fit: contain;
}

.actions { display: flex; gap: 8px; }

/* === 按鈕 === */
.btn {
  padding: 6px 12px;
  border: 1px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: filter .2s, transform .05s;
  color: #fff;
}
.btn:hover { filter: brightness(0.96); }
.btn:active { transform: translateY(1px); }

.btn-orange { background: var(--orange); border-color: color-mix(in srgb, var(--orange) 65%, black); }
.btn-green  { background: var(--green);  border-color: color-mix(in srgb, var(--green) 65%, black); }
.btn-gray   { background: var(--graybtn); border-color: color-mix(in srgb, var(--graybtn) 55%, black); }
.btn-primary{ background: var(--green-2); border-color: color-mix(in srgb, var(--green-2) 65%, black); }
.btn.pill   { border-radius: 999px; }

/* === 分隔線 === */
.divider {
  height: 2px;
  background: var(--line);
  opacity: .7;
  margin-bottom: 10px;
}

/* === 主要容器 === */
.container {
  max-width: 1200px;
  margin: auto;
  padding: 12px 16px;
}

/* === 三欄卡片 === */
.grid-3 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 16px;
  margin-bottom: 16px;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,.05);
  padding: 12px 16px;
}

.card-title {
  font-size: 18px;
  font-weight: 800;
  margin: 0 0 10px 0;
  color: var(--ink);
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-title::before{
  content: "";
  width: 6px; height: 18px;
  border-radius: 4px;
  background: linear-gradient(180deg, var(--green), var(--green-2));
}

/* === 表格區 === */
.service-card h2 { margin-bottom: 10px; }

#tables h3 {
  margin-top: 20px;
  color: var(--green-2);
  font-weight: 700;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: var(--card);
  margin-bottom: 16px;
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
}

thead {
  background: color-mix(in srgb, var(--card) 70%, #f5f7fa);
}

th, td {
  border: 1px solid var(--border);
  padding: 8px 10px;
  text-align: center;
  color: var(--ink);
}

td:first-child, th:first-child { text-align: left; }

input[type="number"] {
  width: 88px;
  padding: 4px 6px;
  text-align: right;
  border: 1px solid var(--line);
  border-radius: 8px;
  background: #fff;
  color: var(--ink);
}
input[type="number"]:focus {
  outline: 2px solid color-mix(in srgb, var(--green-2) 30%, transparent);
  border-color: var(--green-2);
}

/* === 各區塊細節 === */
.row.space-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.addon {
  margin-top: 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
}

.addon-head, .addon-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  padding: 8px 10px;
}
.addon-head {
  background: color-mix(in srgb, var(--card) 75%, #f5f7fa);
  font-weight: 700;
}
.addon-row:not(:last-child) { border-bottom: 1px solid var(--border); }

.qrbox {
  display: flex;
  align-items: center;
  margin-top: 12px;
  gap: 12px;
}
.qrbox img { width: 88px; height: 88px; }
.qr-right p { margin: 4px 0; font-size: 13px; color: var(--muted); }
.bold { font-weight: 800; color: var(--ink); }
.orange { color: var(--orange); }

.note.warn { color: var(--warn); font-size: 13px; }
.note.hidden { display: none; }

/* 自付額區 */
.kv { display: flex; flex-direction: column; gap: 6px; }
.kv-row { display: flex; justify-content: space-between; color: var(--ink); }

/* chips / CMS */
.chips { display: flex; flex-wrap: wrap; gap: 6px; }
.chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: #fff;
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 4px 10px;
  cursor: pointer;
  color: var(--ink);
}
.chip input { margin: 0; }

.cms { display: flex; gap: 6px; flex-wrap: wrap; }
.cms label {
  background: #fff;
  border: 1px solid var(--line);
  color: var(--ink);
  border-radius: 6px;
  padding: 3px 6px;
  cursor: pointer;
}

/* === Footer 底部資訊列（固定＋避位） === */
.footerbar {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  z-index: 999;
  background: #fff;
  border-top: 1px solid var(--line);
  box-shadow: 0 -4px 12px rgba(0,0,0,.08);
  padding: 6px 16px;
  font-size: 15px;
  line-height: 1.6;
  color: var(--ink);
}
.footerbar .foot {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px 16px;
}
.footerbar .ok   { color: var(--green-2); font-weight: 700; }
.footerbar .warn { color: var(--warn);    font-weight: 700; }

/* 讓內容不被 footer 擋住（JS 會動態覆寫 --dock-h） */
body,
main.container,
.card.service-card,
#tables {
  padding-bottom: calc(var(--dock-h) + var(--dock-gap) + env(safe-area-inset-bottom));
}

/* 無 JS 時的保險墊片 */
#dockSpacer { height: calc(var(--dock-h) + var(--dock-gap)); }

/* 表格與底欄距離（再保險） */
#tables { margin-bottom: 12px; }

/* === RWD === */
@media (max-width: 768px) {
  .grid-3 { grid-template-columns: 1fr; }
  .footerbar { font-size: 14px; line-height: 1.4; }
  input[type="number"] { width: 72px; }
}

/* === 列印優化（可選）：列印時隱藏底欄與按鈕列 === */
@media print {
  .footerbar,
  .actions { display: none !important; }
  body { background: #fff; }
  .card { box-shadow: none; }
}
/* 移除 AA 價格欄後的對齊修正 */
.addon-head {
  grid-template-columns: 1fr 1fr;
}
.addon-row {
  grid-template-columns: 1fr 1fr;
}
.addon-inputs {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}
