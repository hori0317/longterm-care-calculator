/* =====================
   可調參數（導覽字體/間距、LOGO高）
===================== */
:root{
  /* 主題色 */
  --bg:#fff6d5;
  --card:#fffdf5;
  --line:#e6dca8;

  --ink:#2f2f20;
  --muted:#7a7557;

  --green:#2e7d32;
  --green-2:#0f766e;
  --orange:#f59e0b;
  --graybtn:#9ca3af;
  --warn:#b00020;

  /* 版面高度占位（JS 會寫入實高） */
  --topbar-h:56px;
  --dock-h:56px;

  /* 導覽列調整點（你常改的在這裡） */
  --logo-h: 70px;            /* 左上 LOGO 高度 */
  --site-title-size: 24px;   /* 「額度試算機」字體大小 */
  --site-title-gap: 48px;    /* 標題與導覽的間距 */
  --nav-font-size: 20px;     /* 導覽連結字體大小 */
  --nav-gap: 48px;           /* 連結之間的間距 */
  --nav-y-padding: 16px;     /* 導覽列上下留白 */

  /* 浮水印參數 */
  --wm-size: 36px;
  --wm-angle: -25deg;
  --wm-alpha: 0.05;          /* 0.03 ~ 0.1 建議 */
  --wm-shift: 120px;         /* 左右擺幅 */
}

/* =====================
   全域
===================== */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","Microsoft JhengHei","PingFang TC",system-ui,sans-serif;
  color:var(--ink);
  background:var(--bg);
  line-height:1.5;
  padding-bottom: var(--dock-h);
}
.hidden{ display:none !important; }
a{ color:var(--green); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* =====================
   頂部列（固定）
===================== */
.topbar{
  position:sticky; top:0; z-index:10000; /* 壓過浮水印 */
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 16px;
  padding-top:max(10px, env(safe-area-inset-top));
  background:rgba(255,253,245,.9);
  backdrop-filter:blur(6px);
  border-bottom:1px solid var(--line);
}
.brand{ display:flex; align-items:center; gap:16px; font-weight:700; letter-spacing:1px; }

/* LOGO 大小（可調） */
.brand img{
  height:var(--logo-h);
  width:auto;
  transition:transform .3s ease;
}
.brand img:hover{ transform:scale(1.08); }

/* 網站標題與導覽的間距（可調） */
.site-title{
  font-size:var(--site-title-size);
  font-weight:700;
  margin-right:var(--site-title-gap);
  color:#222;
}

/* 導覽連結（可調） */
.nav-links{
  display:flex;
  gap:var(--nav-gap);
  align-items:center;
  padding:var(--nav-y-padding) 0;
}
.nav-links a{
  text-decoration:none;
  color:#333;
  font-weight:600;
  font-size:var(--nav-font-size);
  letter-spacing:.8px;
  border-bottom:2px solid transparent;
  padding-bottom:3px;
  transition: color .25s, transform .25s, border-color .25s;
}
.nav-links a:hover{
  color:#ff9800;
  transform:translateY(-2px);
  border-color:#ff9800;
}

/* 右側按鈕列 */
.actions{ display:flex; gap:8px; }
.divider{ height:8px; }

/* =====================
   浮水印（全畫面、左右擺動）
===================== */
.watermark{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9990;           /* 比 topbar 低，避免蓋到工具列 */
  overflow:hidden;
}
.wm-item{
  position:absolute;
  font-weight:700;
  font-size:var(--wm-size);
  color:rgba(0,0,0,var(--wm-alpha));
  transform:rotate(var(--wm-angle));
  white-space:nowrap;
  user-select:none;
  animation: wm-sway var(--dur,12s) ease-in-out infinite alternate;
}
@keyframes wm-sway{
  0%   { transform:translateX(0) rotate(var(--wm-angle)); }
  100% { transform:translateX(var(--wm-shift)) rotate(var(--wm-angle)); }
}
@media print{
  .watermark{ opacity:.08; } /* 若不想列印顯示，改為 display:none; */
}

/* =====================
   底部資訊條（固定）
===================== */
.footerbar{
  position:sticky; bottom:0; z-index:1000;
  background:rgba(255,253,245,.9);
  backdrop-filter:blur(6px);
  border-top:1px solid var(--line);
  padding:8px 12px;
  padding-bottom:max(8px, env(safe-area-inset-bottom));
}
.foot{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:16px;
  flex-wrap:wrap;
  font-weight:600;
  text-align:center;
}
.foot .ok{ color:var(--green); }
.foot .warn{ color:var(--warn); }

/* =====================
   容器與卡片
===================== */
.container{ max-width:1200px; margin:0 auto; padding:12px 16px; }
.grid-3{ display:grid; grid-template-columns:1.1fr 1fr 1fr; gap:16px; }
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:12px;
  padding:16px;
  box-shadow:0 1px 0 rgba(0,0,0,.02);
}
.card-title{ margin:0 0 10px 0; font-size:18px; font-weight:800; }

/* =====================
   元件
===================== */
.btn{ border:none; cursor:pointer; padding:8px 12px; border-radius:10px; font-weight:700; letter-spacing:.5px; color:#fff; background:var(--green); }
.btn:hover{ filter:brightness(1.05); }
.btn:active{ transform:translateY(1px); }
.btn.pill{ border-radius:999px; padding:8px 14px; }
.btn-green{ background:var(--green); color:#fff; }
.btn-orange{ background:var(--orange); color:#fff; }
.btn-gray{ background:var(--graybtn); color:#fff; }

.row{ display:flex; align-items:center; gap:10px; }
.space-between{ justify-content:space-between; }
.hint{ color:var(--muted); font-size:13px; }
.note.warn,.hint.warn{ color:var(--warn); }

.kv .kv-row{ display:flex; justify-content:space-between; align-items:center; padding:4px 0; font-weight:600; }

.chips{ display:flex; flex-wrap:wrap; gap:8px; }
.chip{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:#fff; cursor:pointer; user-select:none; }
.chip input{ transform:translateY(1px); }

.cms{ display:flex; gap:10px; flex-wrap:wrap; }
.cms label{ display:inline-flex; align-items:center; gap:6px; background:#fff; border:1px solid var(--line); border-radius:14px; padding:6px 8px; }
.cms input{ transform:translateY(1px); }

input[type="number"]{
  width:72px; height:36px; font-size:16px; text-align:center; color:var(--ink);
  background:#fff; border:1px solid var(--line); border-radius:8px; outline:none;
}
input[type="number"]:focus{ border-color:var(--green); box-shadow:0 0 0 3px rgba(46,125,50,.1); }

/* =====================
   左卡：AA 加成區（只有項目＋次數）
===================== */
.addon{ margin-top:8px; border:1px solid var(--line); border-radius:10px; overflow:hidden; }
.addon-head, .addon-row{ display:grid; grid-template-columns: 1fr 160px; align-items:center; }
.addon-head{ background:#faf6e4; border-bottom:1px solid var(--line); font-weight:800; padding:8px 12px; }
.addon-row{ padding:8px 12px; border-top:1px dashed var(--line); }
.addon-row:first-child{ border-top:none; }
.addon-row .addon-inputs{ display:flex; justify-content:flex-end; }
.addon-row input[type="number"]{ width:90px; }
.text-right{ text-align:right; }

/* QR 區 */
.qrbox{ margin-top:12px; display:flex; gap:12px; align-items:center; }
.qr-left img{ width:84px; height:84px; object-fit:contain; border-radius:10px; border:1px solid var(--line); background:#fff; }
.qr-right p{ margin:4px 0; }
.qr-right .bold{ font-weight:800; }
.qr-right .orange{ color:var(--orange); font-weight:700; }

/* =====================
   服務表格
===================== */
.service-card h3{ margin:20px 0 8px 2px; font-size:16px; font-weight:800; color:#6b6544; }
#tables{ width:100%; }

#tables table{
  width:100%;
  border-collapse:separate; border-spacing:0;
  background:#fff; border:1px solid var(--line); border-radius:12px; overflow:hidden;
}
#tables thead th{
  position:sticky; top:0; z-index:5;
  background:#f6f1d9; color:#584f2a;
  text-align:left; padding:10px 12px; border-bottom:1px solid var(--line); font-weight:800;
}
#tables tbody td{ padding:10px 12px; border-top:1px solid var(--line); vertical-align:middle; }
#tables tbody tr:nth-child(even){ background:#fffef9; }
.cell-price,.cell-amount{ text-align:right; font-variant-numeric:tabular-nums; }
#tables input[type="number"]{ width:64px; height:34px; font-size:15px; }

/* =====================
   手機優化（<= 860px）
===================== */
@media (max-width: 860px){
  .grid-3{ grid-template-columns:1fr; gap:12px; }
  .card{ padding:12px; }
  .topbar{ padding-top:max(10px, env(safe-area-inset-top)); }
  .footerbar{ padding-bottom:max(8px, env(safe-area-inset-bottom)); }

  /* 表格可水平滑動，並預留底列高度避免 SC09 被擋住 */
  #tables{ overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom: calc(var(--dock-h) + 12px); }
  #tables table{ min-width:760px; table-layout:fixed; }

  #tables th:nth-child(1){ width:42%; }
  #tables th:nth-child(2){ width:12%; }
  #tables th:nth-child(3),
  #tables th:nth-child(4),
  #tables th:nth-child(5){ width:12%; }
  #tables th:nth-child(6){ width:10%; }

  #tables th,#tables td{ padding:8px 10px; font-size:14px; line-height:1.2; white-space:nowrap; }
  #tables input[type="number"]{ width:58px; height:32px; font-size:14px; }

  .foot{ gap:10px; font-size:14px; }

  /* 行動裝置可把導覽略縮 */
  :root{
    --logo-h: 56px;
    --site-title-size: 20px;
    --site-title-gap: 20px;
    --nav-font-size: 18px;
    --nav-gap: 20px;
    --nav-y-padding: 10px;
  }
}

/* =====================
   列印
===================== */
@media print{
  .topbar,.footerbar{ display:none !important; }
  body{ padding:0; background:#fff; }
  .card{ box-shadow:none; }
  #tables thead th{ position:static; }
}
